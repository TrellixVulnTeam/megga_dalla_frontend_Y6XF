{"ast":null,"code":"import { UntypedFormGroup, UntypedFormControl, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/auth.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\n\nfunction AuthComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9)(1, \"p\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.error);\n  }\n}\n\nfunction AuthComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10)(1, \"p\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.success);\n  }\n}\n\nfunction AuthComponent_div_7_span_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 30);\n    i0.ɵɵtext(1, \"Please Enter a valid email!\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AuthComponent_div_7_span_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 30);\n    i0.ɵɵtext(1, \"Field Required\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AuthComponent_div_7_span_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 30);\n    i0.ɵɵtext(1, \" Field Required\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AuthComponent_div_7_span_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 30);\n    i0.ɵɵtext(1, \" Field Required\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AuthComponent_div_7_span_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 30);\n    i0.ɵɵtext(1, \" Passwords must be same!\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AuthComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"h4\");\n    i0.ɵɵtext(2, \"SignUp\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"form\", 12);\n    i0.ɵɵlistener(\"ngSubmit\", function AuthComponent_div_7_Template_form_ngSubmit_3_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.onSignup());\n    });\n    i0.ɵɵelementStart(4, \"div\", 13)(5, \"label\", 14);\n    i0.ɵɵtext(6, \"Email\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(7, \"input\", 15);\n    i0.ɵɵtemplate(8, AuthComponent_div_7_span_8_Template, 2, 0, \"span\", 16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"div\", 13)(10, \"label\", 17);\n    i0.ɵɵtext(11, \"Username\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(12, \"input\", 18);\n    i0.ɵɵtemplate(13, AuthComponent_div_7_span_13_Template, 2, 0, \"span\", 16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"div\", 19)(15, \"div\", 13)(16, \"label\", 20);\n    i0.ɵɵtext(17, \"Password\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(18, \"input\", 21);\n    i0.ɵɵtemplate(19, AuthComponent_div_7_span_19_Template, 2, 0, \"span\", 16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"div\", 13)(21, \"label\", 22);\n    i0.ɵɵtext(22, \"Password Confirmation\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(23, \"input\", 23);\n    i0.ɵɵtemplate(24, AuthComponent_div_7_span_24_Template, 2, 0, \"span\", 16);\n    i0.ɵɵtemplate(25, AuthComponent_div_7_span_25_Template, 2, 0, \"span\", 16);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(26, \"div\", 13);\n    i0.ɵɵelement(27, \"input\", 24);\n    i0.ɵɵelementStart(28, \"label\", 25);\n    i0.ɵɵtext(29, \" Vendor \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(30, \"div\", 13);\n    i0.ɵɵelement(31, \"input\", 26);\n    i0.ɵɵelementStart(32, \"label\", 27);\n    i0.ɵɵtext(33, \" Customer \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(34, \"div\")(35, \"button\", 28);\n    i0.ɵɵtext(36, \" Sign Up \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(37, \"button\", 29);\n    i0.ɵɵlistener(\"click\", function AuthComponent_div_7_Template_button_click_37_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.onSwitch());\n    });\n    i0.ɵɵtext(38, \" Switch to Login \");\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"formGroup\", ctx_r2.signupForm);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r2.signupForm.get(\"email\").valid && ctx_r2.signupForm.get(\"email\").touched);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r2.signupForm.get(\"username\").valid && ctx_r2.signupForm.get(\"username\").touched);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r2.signupForm.get(\"passwords.password\").valid && ctx_r2.signupForm.get(\"passwords.password\").touched);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r2.signupForm.get(\"passwords.confirmpassword\").valid && ctx_r2.signupForm.get(\"passwords.confirmpassword\").touched);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.signupForm.get(\"passwords\").errors == null ? null : ctx_r2.signupForm.get(\"passwords\").errors.notsame);\n    i0.ɵɵadvance(10);\n    i0.ɵɵproperty(\"disabled\", !ctx_r2.signupForm.valid);\n  }\n}\n\nfunction AuthComponent_div_11_span_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 30);\n    i0.ɵɵtext(1, \"Field Required\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AuthComponent_div_11_span_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 30);\n    i0.ɵɵtext(1, \"Field Required!\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AuthComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 31)(1, \"h4\");\n    i0.ɵɵtext(2, \"Login\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"form\", 12);\n    i0.ɵɵlistener(\"ngSubmit\", function AuthComponent_div_11_Template_form_ngSubmit_3_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.onLogin());\n    });\n    i0.ɵɵelementStart(4, \"div\", 13)(5, \"label\", 17);\n    i0.ɵɵtext(6, \"Username\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(7, \"input\", 18);\n    i0.ɵɵtemplate(8, AuthComponent_div_11_span_8_Template, 2, 0, \"span\", 16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"div\", 13)(10, \"label\", 20);\n    i0.ɵɵtext(11, \"Password\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(12, \"input\", 21);\n    i0.ɵɵtemplate(13, AuthComponent_div_11_span_13_Template, 2, 0, \"span\", 16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"div\")(15, \"button\", 28);\n    i0.ɵɵtext(16, \" Login \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"button\", 29);\n    i0.ɵɵlistener(\"click\", function AuthComponent_div_11_Template_button_click_17_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r16.onSwitch());\n    });\n    i0.ɵɵtext(18, \" Switch to Signup \");\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"formGroup\", ctx_r3.loginForm);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r3.loginForm.get(\"username\").valid && ctx_r3.loginForm.get(\"username\").touched);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r3.loginForm.get(\"password\").valid && ctx_r3.loginForm.get(\"password\").touched);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", !ctx_r3.loginForm.valid);\n  }\n}\n\nexport let AuthComponent = /*#__PURE__*/(() => {\n  class AuthComponent {\n    constructor(authService, router) {\n      this.authService = authService;\n      this.router = router;\n      this.isLoginMode = true;\n      this.error = null;\n      this.success = null;\n    }\n\n    ngOnInit() {\n      this.signupForm = new UntypedFormGroup({\n        'username': new UntypedFormControl(null, Validators.required),\n        'email': new UntypedFormControl(null, [Validators.required, Validators.email]),\n        'is_vendor': new UntypedFormControl(null),\n        'is_customer': new UntypedFormControl(null),\n        'passwords': new UntypedFormGroup({\n          'password': new UntypedFormControl(null, [Validators.required, Validators.minLength(6)]),\n          'confirmpassword': new UntypedFormControl(null, Validators.required)\n        }, this.passwordCheck)\n      });\n      this.loginForm = new UntypedFormGroup({\n        'username': new UntypedFormControl(null, Validators.required),\n        'password': new UntypedFormControl(null, [Validators.required, Validators.minLength(6)])\n      });\n    }\n\n    onSwitch() {\n      this.isLoginMode = !this.isLoginMode;\n    }\n\n    onSignup() {\n      this.authService.signupUser({\n        'email': this.signupForm.get('email').value,\n        'username': this.signupForm.get('username').value,\n        'is_vendor': this.signupForm.get('is_vendor').value,\n        'is_customer': this.signupForm.get('is_customer').value,\n        'password': this.signupForm.get('passwords.password').value\n      }).subscribe(data => {\n        console.log(data);\n        this.isLoginMode = true;\n        this.success = 'Signup was successful';\n        this.error = null;\n      }, errorRes => {\n        console.log(errorRes);\n        this.error = errorRes;\n      });\n    }\n\n    onLogin() {\n      this.authService.loginUser(this.loginForm.value).subscribe(response => {\n        this.authService.getProfile().subscribe(profile => {\n          this.router.navigate([`/home/`]);\n        });\n      }, errorRes => {\n        this.error = errorRes;\n      });\n      this.loginForm.reset();\n    }\n\n    passwordCheck(control) {\n      if (control.get('password').value != control.get('confirmpassword').value) {\n        return {\n          'notsame': true\n        };\n      }\n\n      return null;\n    }\n\n  }\n\n  AuthComponent.ɵfac = function AuthComponent_Factory(t) {\n    return new (t || AuthComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.Router));\n  };\n\n  AuthComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AuthComponent,\n    selectors: [[\"app-auth\"]],\n    decls: 13,\n    vars: 4,\n    consts: [[1, \"container-fluid\", \"main\"], [\"src\", \"assets/images/online.jpeg\", \"alt\", \"\", 1, \"img-responsive\", \"reg-image\"], [1, \"row\"], [\"class\", \"alert alert-danger\", 4, \"ngIf\"], [\"class\", \"alert alert-success\", 4, \"ngIf\"], [1, \"col-3\"], [1, \"col-md-5\"], [\"class\", \"col-xs-12 col-md-offset-3 reg\", 4, \"ngIf\"], [\"class\", \"col-xs-12 col-md-6 col-md-offset-3 reg\", 4, \"ngIf\"], [1, \"alert\", \"alert-danger\"], [1, \"alert\", \"alert-success\"], [1, \"col-xs-12\", \"col-md-offset-3\", \"reg\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"form-group\"], [\"for\", \"email\"], [\"type\", \"email\", \"id\", \"email\", \"name\", \"email\", \"formControlName\", \"email\", 1, \"form-control\"], [\"class\", \"help-block\", \"style\", \"color: red\", 4, \"ngIf\"], [\"for\", \"username\"], [\"type\", \"text\", \"id\", \"username\", \"name\", \"username\", \"formControlName\", \"username\", 1, \"form-control\"], [\"formGroupName\", \"passwords\"], [\"for\", \"password\"], [\"type\", \"password\", \"id\", \"password\", \"name\", \"password\", \"formControlName\", \"password\", 1, \"form-control\"], [\"for\", \"confirmpassword\"], [\"type\", \"password\", \"id\", \"confirmpassword\", \"formControlName\", \"confirmpassword\", \"name\", \"confirmpassword\", 1, \"form-control\"], [\"type\", \"checkbox\", \"id\", \"is_vendor\", \"name\", \"is_vendor\", \"formControlName\", \"is_vendor\", 1, \"form-check-input\", \"form-control\"], [\"for\", \"is_vendor\"], [\"type\", \"checkbox\", \"id\", \"is_customer\", \"name\", \"is_customer\", \"formControlName\", \"is_customer\", 1, \"form-check-input\", \"form-control\"], [\"for\", \"is_customer\"], [\"type\", \"submit\", 1, \"btn\", \"btn-warning\", 3, \"disabled\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-warning\", \"btn-sm\", 3, \"click\"], [1, \"help-block\", 2, \"color\", \"red\"], [1, \"col-xs-12\", \"col-md-6\", \"col-md-offset-3\", \"reg\"]],\n    template: function AuthComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelement(1, \"img\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵtemplate(3, AuthComponent_div_3_Template, 3, 1, \"div\", 3);\n        i0.ɵɵtemplate(4, AuthComponent_div_4_Template, 3, 1, \"div\", 4);\n        i0.ɵɵelement(5, \"div\", 5);\n        i0.ɵɵelementStart(6, \"div\", 6);\n        i0.ɵɵtemplate(7, AuthComponent_div_7_Template, 39, 7, \"div\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(8, \"div\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"div\", 2);\n        i0.ɵɵelement(10, \"div\", 5);\n        i0.ɵɵtemplate(11, AuthComponent_div_11_Template, 19, 4, \"div\", 8);\n        i0.ɵɵelement(12, \"div\", 5);\n        i0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.error);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.success);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", !ctx.isLoginMode);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", ctx.isLoginMode);\n      }\n    },\n    dependencies: [i3.NgIf, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.CheckboxControlValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.FormGroupDirective, i4.FormControlName, i4.FormGroupName],\n    styles: [\".main[_ngcontent-%COMP%]{background:#edf6f9;border:1px solid rgb(10,48,100);height:93vh;display:flex;flex-direction:column;justify-content:center;background-image:url(/assets/images/oliver.jpeg)}.reg[_ngcontent-%COMP%]{background:#0449a2;padding:20px;color:#fff;border:1px solid black;border-radius:5px;position:relative;opacity:.9}.form-group[_ngcontent-%COMP%]{margin:10px}.btn[_ngcontent-%COMP%]{margin:5px}.reg-image[_ngcontent-%COMP%]{height:93vh;width:99%;position:absolute;filter:brightness(30%)}\"]\n  });\n  return AuthComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}